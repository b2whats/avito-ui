{"version":3,"sources":["../../../src/components/List/ListItem.tsx"],"names":["ListItem","listItemTheme","children","props","theme","bounds","setMeasureRef","_","setRef","beforeValign","beforeTreshold","height","afterValign","afterTreshold","Before","StackText","Label","Caption","Link","After","before","after","renderSlot","Component","element","undefined","preventFocus","event","preventDefault","events","onClick","disabled","onMouseDown","as","Text","label","caption","link"],"mappings":"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","sourcesContent":["import React, { isValidElement } from 'react'\nimport { useRefHook, useMeasure, foldThemeParams, uiComponent, Stack, Box, Text, TextProps } from '@avito/core'\nimport { ListItemProps } from './contract'\nimport { listItemTheme } from './theme'\n\nexport const ListItem = uiComponent('ListItem', listItemTheme)(({ children, ...props }: ListItemProps, { theme }) => {\n  // Необходимо прервать 3DTouch что бы он не прерывал событие клика\n  // TODO: Протестировать на телефоне с HapticTouch\n  //const setTouchRef = usePrevent3DTouch()\n  const [bounds, setMeasureRef] = useMeasure()\n  const [_, setRef] = useRefHook(setMeasureRef)\n\n  const beforeValign = props.beforeValign === 'auto'\n    ? bounds && listItemTheme.beforeTreshold < bounds.height ? 'top' : 'middle'\n    : props.beforeValign\n\n  const afterValign = props.afterValign === 'auto'\n    ? bounds && listItemTheme.afterTreshold < bounds.height ? 'top' : 'middle'\n    : props.afterValign\n\n\n  const { ListItem, Before, StackText, Label, Caption, Link, After } = foldThemeParams(props, theme)\n\n  const before = props.before && <Box {...Before.props} valignSelf={beforeValign}>{props.before}</Box>\n  const after = props.after && <Box {...After.props} valignSelf={afterValign}>{props.after}</Box>\n\n  const renderSlot = (Component: any, element: React.ReactNode, props?: TextProps) => (\n    typeof element === 'string' && element ? <Component {...props}>{element}</Component> :\n    typeof element === 'function' ? element(props) :\n    isValidElement(element) ? <element.type {...props} {...element.props} /> :\n    undefined\n  )\n\n  const preventFocus = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault()\n  }\n\n  const events = props.onClick && !props.disabled && {\n    onMouseDown: preventFocus,\n    onClick: props.onClick,\n    as: 'label',\n  }\n\n  return (\n    <Stack ref={setRef} {...ListItem.props} {...props} {...events}>\n      {before}\n      <Stack column grow {...StackText.props}>\n        {renderSlot(Text, props.label, Label.props)}\n        {renderSlot(Text, props.caption, Caption.props)}\n        {renderSlot(Text, props.link, Link.props)}\n      </Stack>\n      {after}\n    </Stack>\n  )\n})\n"],"file":"ListItem.js"}