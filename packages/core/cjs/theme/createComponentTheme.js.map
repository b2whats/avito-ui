{"version":3,"sources":["../../src/theme/createComponentTheme.ts"],"names":["cache","WeakMap","defaultKey","createComponentTheme","componentName","componentTheme","theme","override","cursor","globalComponentTheme","has","set","get","deepmerge","all"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,KAAK,GAAG,IAAIC,OAAJ,EAAd;AACA,IAAMC,UAAU,GAAG,EAAnB;;AAEO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAmBC,aAAnB,EAA0CC,cAA1C;AAAA,SAClC,UAACC,KAAD,EAAaC,QAAb,EAAsD;AAAA,QAAzCA,QAAyC;AAAzCA,MAAAA,QAAyC,GAAlBL,UAAkB;AAAA;;AACpD,QAAIM,MAAM,GAAGR,KAAb;AACA,QAAMS,oBAAoB,GAAGH,KAAK,CAACF,aAAD,CAAL,IAAwBF,UAArD;;AAEA,QAAI,CAACM,MAAM,CAACE,GAAP,CAAWL,cAAX,CAAL,EAAiC;AAC/BG,MAAAA,MAAM,CAACG,GAAP,CAAWN,cAAX,EAA2B,IAAIJ,OAAJ,EAA3B;AACD;;AACDO,IAAAA,MAAM,GAAGA,MAAM,CAACI,GAAP,CAAWP,cAAX,CAAT;;AAEA,QAAI,CAACG,MAAM,CAACE,GAAP,CAAWD,oBAAX,CAAL,EAAuC;AACrCD,MAAAA,MAAM,CAACG,GAAP,CAAWF,oBAAX,EAAiC,IAAIR,OAAJ,EAAjC;AACD;;AACDO,IAAAA,MAAM,GAAGA,MAAM,CAACI,GAAP,CAAWH,oBAAX,CAAT;;AAEA,QAAI,CAACD,MAAM,CAACE,GAAP,CAAWH,QAAX,CAAL,EAA2B;AACzBC,MAAAA,MAAM,CAACG,GAAP,CAAWJ,QAAX,EAAqBM,sBAAUC,GAAV,CAAc,CAACT,cAAD,EAAiBI,oBAAjB,EAAuCF,QAAvC,CAAd,CAArB;AACD;;AAED,WAAOC,MAAM,CAACI,GAAP,CAAWL,QAAX,CAAP;AACD,GApBiC;AAAA,CAA7B","sourcesContent":["import deepmerge from 'deepmerge'\n\nconst cache = new WeakMap()\nconst defaultKey = {}\n\nexport const createComponentTheme = <T extends object>(componentName: string, componentTheme: T) =>\n  (theme: any, override: Partial<T> = defaultKey): T => {\n    let cursor = cache\n    const globalComponentTheme = theme[componentName] || defaultKey\n\n    if (!cursor.has(componentTheme)) {\n      cursor.set(componentTheme, new WeakMap())\n    }\n    cursor = cursor.get(componentTheme)\n\n    if (!cursor.has(globalComponentTheme)) {\n      cursor.set(globalComponentTheme, new WeakMap())\n    }\n    cursor = cursor.get(globalComponentTheme)\n\n    if (!cursor.has(override)) {\n      cursor.set(override, deepmerge.all([componentTheme, globalComponentTheme, override]))\n    }\n\n    return cursor.get(override)\n  }\n"],"file":"createComponentTheme.js"}