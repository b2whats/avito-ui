{"version":3,"sources":["../../src/hooks/usePrevent3DTouch.ts"],"names":["noop","usePrevent3DTouch","window","document","isPrevented","prevent3DTouch","event","changedTouches","force","preventDefault","stopPropagation","current","restoreClick","currentTarget","click","ref","setRef","node","addEventListener","removeEventListener"],"mappings":";;;;;AAAA;;AAEA,IAAMA,IAAI,GAAG,SAAPA,IAAO,GAAM,CAAE,CAArB;;AAEO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AACrC,MAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,EAAE,wBAAwBA,MAAM,CAACC,QAAjC,CAArC,EAAiF;AAC/E,WAAOH,IAAP;AACD;;AAED,MAAMI,WAAW,GAAG,mBAAgB,KAAhB,CAApB;AAEA,MAAMC,cAAc,GAAG,wBAAY,UAACC,KAAD,EAAgB;AACjD,QAAIA,KAAK,CAACC,cAAN,CAAqB,CAArB,EAAwBC,KAAxB,GAAgC,GAApC,EAAyC;AACvCF,MAAAA,KAAK,CAACG,cAAN;AACAH,MAAAA,KAAK,CAACI,eAAN;AAEAN,MAAAA,WAAW,CAACO,OAAZ,GAAsB,IAAtB;AACD;AACF,GAPsB,EAOpB,EAPoB,CAAvB;AASA,MAAMC,YAAY,GAAG,wBAAY,UAACN,KAAD,EAAgB;AAC/C,QAAIF,WAAW,CAACO,OAAhB,EAAyB;AACvBL,MAAAA,KAAK,CAACI,eAAN;AACAJ,MAAAA,KAAK,CAACO,aAAN,CAAoBC,KAApB;AAEAV,MAAAA,WAAW,CAACO,OAAZ,GAAsB,KAAtB;AACD;AACF,GAPoB,EAOlB,EAPkB,CAArB;AASA,MAAMI,GAAG,GAAG,mBAA2B,IAA3B,CAAZ;AAEA,MAAMC,MAAM,GAAG,wBAAY,UAAAC,IAAI,EAAI;AACjC,QAAIA,IAAJ,EAAU;AACRA,MAAAA,IAAI,CAACC,gBAAL,CAAsB,kBAAtB,EAA0Cb,cAA1C;AACAY,MAAAA,IAAI,CAACC,gBAAL,CAAsB,UAAtB,EAAkCN,YAAlC;AACD,KAHD,MAGO,IAAIG,GAAG,CAACJ,OAAR,EAAiB;AACtBI,MAAAA,GAAG,CAACJ,OAAJ,CAAYQ,mBAAZ,CAAgC,kBAAhC,EAAoDd,cAApD;AACAU,MAAAA,GAAG,CAACJ,OAAJ,CAAYQ,mBAAZ,CAAgC,UAAhC,EAA4CP,YAA5C;AACD;;AAEDG,IAAAA,GAAG,CAACJ,OAAJ,GAAcM,IAAd;AACD,GAVc,EAUZ,EAVY,CAAf;AAYA,SAAOD,MAAP;AACD,CAxCM","sourcesContent":["import { useCallback, useRef } from 'react'\n\nconst noop = () => {}\n\nexport const usePrevent3DTouch = () => {\n  if (typeof window !== 'undefined' && !('ontouchforcechange' in window.document)) {\n    return noop\n  }\n\n  const isPrevented = useRef<boolean>(false)\n\n  const prevent3DTouch = useCallback((event: any) => {\n    if (event.changedTouches[0].force > 0.2) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      isPrevented.current = true\n    }\n  }, [])\n\n  const restoreClick = useCallback((event: any) => {\n    if (isPrevented.current) {\n      event.stopPropagation()\n      event.currentTarget.click()\n\n      isPrevented.current = false\n    }\n  }, [])\n\n  const ref = useRef<HTMLElement | null>(null)\n\n  const setRef = useCallback(node => {\n    if (node) {\n      node.addEventListener('touchforcechange', prevent3DTouch)\n      node.addEventListener('touchend', restoreClick)\n    } else if (ref.current) {\n      ref.current.removeEventListener('touchforcechange', prevent3DTouch)\n      ref.current.removeEventListener('touchend', restoreClick)\n    }\n\n    ref.current = node\n  }, [])\n\n  return setRef\n}\n"],"file":"usePrevent3DTouch.js"}