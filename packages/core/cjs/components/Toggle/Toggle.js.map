{"version":3,"sources":["../../../src/components/Toggle/Toggle.tsx"],"names":["toggleClassName","_","props","display","valign","shape","undefined","textRules","switchClassName","themeStyle","shrink","adjacentSelector","variant","Toggle","toggleTheme","className","children","theme","tokens","ref","setRef","groupProps","_demo","onChange","mode","checked","v","indeterminate","current","Boolean","aria","role","disabled","loading","preventFocus","event","preventDefault","preventLabelClick","stopPropagation","onClick","value","name","type","Switch","Icon","Label","toggleStyle","style","switchStyle","label","labelPosition"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { usePrevent3DTouch } from '../../hooks/'\nimport { foldThemeParams, createClassName } from '../../styled-system/'\nimport { uiComponent } from '../../theme/'\nimport { filterProps, invokeAll } from '../../utils/'\nimport { useGroupHook } from '../Layout/'\nimport { Text } from '../Text/'\nimport { ToggleProps } from './contract'\nimport { toggleTheme } from './theme'\n\nconst toggleClassName = createClassName<ToggleProps, typeof toggleTheme>(\n  (_, props) => ({\n    display: 'inline-flex',\n    valign: 'baseline',\n    ...props,\n    shape: undefined,\n  }),\n  (textRules) => (`\n    position: relative;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n\n    & > input {\n      clip: rect(0, 0, 0, 0);\n      height: 1px;\n      position: absolute;\n      white-space: nowrap;\n      width: 1px;\n      margin: -1px;\n      border-width: 0;\n      border-style: initial;\n      border-color: initial;\n      border-image: initial;\n      overflow: hidden;\n      padding: 0;\n    }\n\n    &[aria-disabled] {\n      pointer-events: none;\n    }\n\n    ${textRules}\n  `)\n)\n\nconst switchClassName = createClassName<ToggleProps, typeof toggleTheme>(\n  (themeStyle, props) => ({\n    display: 'inline-flex',\n    shrink: false,\n    shape: props.shape,\n    adjacentSelector: 'input',\n    variant: props.variant,\n    ...themeStyle,\n  }),\n  (textRules) => (`\n    transition: background-color 0.2s ease 0s;\n    -webkit-user-select: none;\n\n    &::before {\n      content: 'x';\n      width: 0px;\n      overflow: hidden;\n      align-self: center;\n      color: transparent;\n    }\n\n    ${textRules}\n  `)\n)\n\nexport const Toggle = uiComponent('Toggle', toggleTheme)<ToggleProps, HTMLInputElement>((\n  { className, children, ...props },\n  { theme, tokens },\n  [ref, setRef]\n) => {\n  const groupProps = useGroupHook(ref, props)\n\n  // Uncontrolled input for demos\n  if (tokens._demo && !groupProps.onChange && groupProps.mode === 'checkbox') {\n    const [checked, onChange] = useState(groupProps.checked || false)\n    groupProps.checked = checked\n    groupProps.onChange = v => onChange(v.checked)\n  }\n\n  useEffect(() => {\n    if (props.indeterminate !== undefined && ref.current) {\n      ref.current.indeterminate = props.indeterminate\n    }\n  }, [props.indeterminate])\n\n  const checked = groupProps.indeterminate ? 'mixed' as const : Boolean(groupProps.checked)\n\n  const aria = {\n    role: groupProps.role || groupProps.mode,\n    'aria-checked': checked,\n    'aria-invalid': groupProps.variant === 'error',\n    'aria-disabled': groupProps.disabled,\n    'aria-busy': groupProps.loading,\n  }\n\n  const preventFocus = (event: React.MouseEvent<Element> | React.TouchEvent<Element>) => {\n    event.preventDefault()\n  }\n\n  const preventLabelClick = invokeAll((event: React.SyntheticEvent) => event.stopPropagation(), groupProps.onClick)\n\n  const onChange = () => {\n    const value = {\n      name: groupProps.name,\n      value: groupProps.value,\n      checked: !groupProps.checked,\n      type: aria.role,\n    }\n\n    groupProps.onChange && groupProps.onChange(value)\n  }\n\n  const { Toggle, Switch, Icon, Label } = foldThemeParams(groupProps, theme)\n  const toggleStyle = toggleClassName(groupProps, tokens, Toggle.style)\n  const switchStyle = switchClassName(groupProps, tokens, Switch.style)\n  const label = props.label && <Text {...Label.props} crop>{props.label}</Text>\n\n  return (\n    <label ref={usePrevent3DTouch()} css={toggleStyle} {...aria} onMouseDown={preventFocus}>\n      {props.labelPosition === 'start' && label}\n      <input\n        {...filterProps(groupProps)}\n        ref={setRef}\n        type={props.mode}\n        onChange={onChange}\n        onClick={preventLabelClick} />\n      <div css={switchStyle} className={className}>\n        {children && children({ checked, loading: props.loading, Icon })}\n      </div>\n      {props.labelPosition === 'end' && label}\n    </label>\n  )\n})\n"],"file":"Toggle.js"}