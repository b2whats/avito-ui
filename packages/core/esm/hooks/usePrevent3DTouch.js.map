{"version":3,"sources":["../../src/hooks/usePrevent3DTouch.ts"],"names":["useCallback","useRef","noop","usePrevent3DTouch","window","document","isPrevented","prevent3DTouch","event","changedTouches","force","preventDefault","stopPropagation","current","restoreClick","currentTarget","click","ref","setRef","node","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,MAAtB,QAAoC,OAApC;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM,CAAE,CAArB;;AAEA,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AACrC,MAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,EAAE,wBAAwBA,MAAM,CAACC,QAAjC,CAArC,EAAiF;AAC/E,WAAOH,IAAP;AACD;;AAED,MAAMI,WAAW,GAAGL,MAAM,CAAU,KAAV,CAA1B;AAEA,MAAMM,cAAc,GAAGP,WAAW,CAAC,UAACQ,KAAD,EAAgB;AACjD,QAAIA,KAAK,CAACC,cAAN,CAAqB,CAArB,EAAwBC,KAAxB,GAAgC,GAApC,EAAyC;AACvCF,MAAAA,KAAK,CAACG,cAAN;AACAH,MAAAA,KAAK,CAACI,eAAN;AAEAN,MAAAA,WAAW,CAACO,OAAZ,GAAsB,IAAtB;AACD;AACF,GAPiC,EAO/B,EAP+B,CAAlC;AASA,MAAMC,YAAY,GAAGd,WAAW,CAAC,UAACQ,KAAD,EAAgB;AAC/C,QAAIF,WAAW,CAACO,OAAhB,EAAyB;AACvBL,MAAAA,KAAK,CAACI,eAAN;AACAJ,MAAAA,KAAK,CAACO,aAAN,CAAoBC,KAApB;AAEAV,MAAAA,WAAW,CAACO,OAAZ,GAAsB,KAAtB;AACD;AACF,GAP+B,EAO7B,EAP6B,CAAhC;AASA,MAAMI,GAAG,GAAGhB,MAAM,CAAqB,IAArB,CAAlB;AAEA,MAAMiB,MAAM,GAAGlB,WAAW,CAAC,UAAAmB,IAAI,EAAI;AACjC,QAAIA,IAAJ,EAAU;AACRA,MAAAA,IAAI,CAACC,gBAAL,CAAsB,kBAAtB,EAA0Cb,cAA1C;AACAY,MAAAA,IAAI,CAACC,gBAAL,CAAsB,UAAtB,EAAkCN,YAAlC;AACD,KAHD,MAGO,IAAIG,GAAG,CAACJ,OAAR,EAAiB;AACtBI,MAAAA,GAAG,CAACJ,OAAJ,CAAYQ,mBAAZ,CAAgC,kBAAhC,EAAoDd,cAApD;AACAU,MAAAA,GAAG,CAACJ,OAAJ,CAAYQ,mBAAZ,CAAgC,UAAhC,EAA4CP,YAA5C;AACD;;AAEDG,IAAAA,GAAG,CAACJ,OAAJ,GAAcM,IAAd;AACD,GAVyB,EAUvB,EAVuB,CAA1B;AAYA,SAAOD,MAAP;AACD,CAxCM","sourcesContent":["import { useCallback, useRef } from 'react'\n\nconst noop = () => {}\n\nexport const usePrevent3DTouch = () => {\n  if (typeof window !== 'undefined' && !('ontouchforcechange' in window.document)) {\n    return noop\n  }\n\n  const isPrevented = useRef<boolean>(false)\n\n  const prevent3DTouch = useCallback((event: any) => {\n    if (event.changedTouches[0].force > 0.2) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      isPrevented.current = true\n    }\n  }, [])\n\n  const restoreClick = useCallback((event: any) => {\n    if (isPrevented.current) {\n      event.stopPropagation()\n      event.currentTarget.click()\n\n      isPrevented.current = false\n    }\n  }, [])\n\n  const ref = useRef<HTMLElement | null>(null)\n\n  const setRef = useCallback(node => {\n    if (node) {\n      node.addEventListener('touchforcechange', prevent3DTouch)\n      node.addEventListener('touchend', restoreClick)\n    } else if (ref.current) {\n      ref.current.removeEventListener('touchforcechange', prevent3DTouch)\n      ref.current.removeEventListener('touchend', restoreClick)\n    }\n\n    ref.current = node\n  }, [])\n\n  return setRef\n}\n"],"file":"usePrevent3DTouch.js"}